<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
        
        <title>县级供电企业管理测评总览</title>
        <link rel="stylesheet" href="../static/element_ui/index.css">
        <link rel="stylesheet" href="../static/element_ui/iconfont/iconfont.css">
        <link rel="stylesheet" href="../static/css/pages/week.css">
        <script src="../static/element_ui/vue.js" type="text/javascript"></script>
        <script src="../static/element_ui/index.js" type="text/javascript"></script>
        <script src="../static/element_ui/vuex.js" type="text/javascript"></script>
        <script src="../static/element_ui/store.js" type="text/javascript"></script>
        <script src="../static/element_ui/vue-resource.js" type="text/javascript"></script>
        <script src="../static/element_ui/vue-router.js" type="text/javascript"></script>
    </head>
    <body> 
        <div id="idbody">
            <el-button type="primary" @click="add" size="small">新增</el-button>
            <el-table class="tables" 
                border
                :data="tableData"
                style="width: 100%">
                <el-table-column 
                  align="center"
                  label="本周完成情况"
                  >
                  <template slot-scope="scope">
                        <ul>
                            <li v-for="(items,index) in scope.row.dataList"  v-text="items.name" :class="{clickIndex:items.isSelect==true}" @click="dataClick(scope.$index, scope.row,items,index)"></li>
                        </ul>
                  </template>
                </el-table-column>

                <el-table-column 
                  align="center"
                  label="No."
                  prop="index"
                  >
                </el-table-column>

                <el-table-column 
                  align="center"
                  label="项目名称"
                  prop="index"
                  >
                  <template slot-scope="scope">
                        <el-select v-model="scope.row.XmName" placeholder="请选择">
                            <el-option
                                v-for="(item,index) in xmName"
                                :key="index"
                                :label="item.name"
                                :value="item.name">
                            </el-option>
                        </el-select>
                  </template>
                </el-table-column>

                <el-table-column 
                  align="center"
                  label="任务项"
                  prop="index"
                  >
                  <template slot-scope="scope">
                        <el-select v-model="scope.row.Rwx" placeholder="请选择">
                            <el-option
                                v-for="(item,index) in rwx"
                                :key="index"
                                :label="item.name"
                                :value="item.name">
                            </el-option>
                        </el-select>
                  </template>
                </el-table-column>

                <el-table-column 
                  align="center"
                  label="工作任务描述"
                  prop="index"
                  >
                  <template slot-scope="scope">
                        <el-input v-model="scope.row.miaoShu" placeholder="请输入工作任务描述"></el-input>
                  </template>
                </el-table-column>

                <el-table-column 
                  align="center"
                  label="责任人"
                  prop="index"
                  >
                  <template slot-scope="scope">
                        <el-input v-model="scope.row.zrr" placeholder="请输入工作任务描述"></el-input>
                  </template>
                </el-table-column>
            </el-table>
            <el-button style="margin-top:20px;" type="primary" @click="save" size="small">保存</el-button>
        </div>
    </body>

    <script>
        var myHome = new Vue({
            el:"#idbody",
            data:{
                //任务项
                rwx:[
                    {
                        name:"测试一",
                    },
                    {
                        name:"测试二",
                    },
                    {
                        name:"测试三",
                    },
                    {
                        name:"测试四",
                    },
                ],
                //项目名称
                xmName:[
                    {
                        name:"实现计划评价",
                    },
                    {
                        name:"客户用电行为分析",
                    },
                    {
                        name:"市县经营评价",
                    },
                ],
                tableData:[],
                addIndex:0,
            },
            mounted:function(){
                var _this=this;
                
            },
            methods:{
                //新增
                add:function(){
                    var _this=this;
                     //本周日期
                    var dataLists=[
                        {
                            name:"27",//日期
                            isSelect:false,//是否被点击   获取完数据以后  可以循环遍历添加其属性
                            nums:0,//点击次数   获取完数据以后  可以循环遍历添加其属性
                        },
                        {
                            name:"28",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"29",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"30",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"31",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"1",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"2",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"3",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"4",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"5",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"6",
                            isSelect:false,
                            nums:0,
                        },
                        {
                            name:"7",
                            isSelect:false,
                            nums:0,
                        },
                    ];
                    _this.addIndex++;
                    var objs={
                        index:_this.addIndex,
                        dataList:dataLists,
                        XmName:"",
                        miaoShu:"",
                        zrr:"",
                        Rwx:"",
                    };

                    _this.tableData.push(objs);
                },
                //点击日期
                dataClick:function(scopeIndex,scopeRow,items,itemsIndex){
                    var _this=this;
                    var itemss=scopeRow.dataList[itemsIndex];
                    itemss.nums++;
                    if(itemss.nums%2==0){
                        itemss.isSelect=false;
                        itemss.nums=0;
                    }else{
                        itemss.isSelect=true;
                    };
                },
                //保存
                save:function(){
                    var _this=this;
                    console.log(_this.tableData);//所有表格的數據
                },

            },
            updated:function(){
                var _this=this;
            },
        });
    </script>
</html>